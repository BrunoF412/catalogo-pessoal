<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Catálogo Pessoal</title>
  <link rel="stylesheet" href="style.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"/>
  <script defer src="app.js"></script>
</head>
<body>
  <!-- Botões de troca de modo -->
  <div class="modo-selector">
    <button id="btnCatalogo" onclick="setModo('catalogo')">Catálogo Pessoal</button>
    <button id="btnLista"   onclick="setModo('lista')">Listas Pessoais</button>
  </div>

  <div class="container">

    <!-- ─── MODO CATÁLOGO ─────────────────────────────────────── -->
    <div id="modo-catalogo">
      <aside class="form-section">
        <h1>Catálogo Pessoal</h1>
        <h2>Adicionar Item</h2>

        <input type="text"   id="titulo"    placeholder="Título" oninput="this.value = this.value.toUpperCase()"/>

        <!-- Select fixo de categoria -->
        <select id="categoria">
          <option value="CD">CD</option>
          <option value="LIVRO">LIVRO</option>
          <option value="VINIL">VINIL</option>
        </select>

        <input type="number" id="ano"       placeholder="Ano"/>
        <input type="text"   id="extra"     placeholder="Informação extra (ex: Autor ou Banda)"/>
        <textarea            id="descricao" placeholder="Descrição"></textarea>

        <!-- Upload com 2 ações: Galeria e Câmera -->
        <div class="importar-wrapper">
          <div class="file-actions">
            <button type="button" onclick="document.getElementById('img-galeria').click()">🖼️ Escolher da galeria</button>
            <button type="button" onclick="document.getElementById('img-camera').click()">📷 Tirar foto</button>
          </div>
          <span id="nome-imagem">Nenhuma imagem escolhida</span>

          <!-- Galeria -->
          <input type="file" id="img-galeria" accept="image/*" style="display:none"/>
          <!-- Câmera -->
          <input type="file" id="img-camera" accept="image/*" capture="environment" style="display:none"/>
        </div>

        <button id="btnSalvar">Salvar Item</button>
        <button onclick="exportarBackup()">📤 Exportar Backup</button>

        <!-- Importar backup -->
        <div class="importar-wrapper">
          <button type="button" onclick="document.getElementById('input-backup').click()">📥 Importar Backup</button>
          <span id="nome-backup">Nenhum arquivo escolhido</span>
          <input type="file" id="input-backup" style="display:none"/>
        </div>
      </aside>

      <main class="catalog-section">
        <div class="busca-container">
          <input type="text"
                 id="busca"
                 placeholder="Buscar por título, autor, banda..."
                 oninput="buscarItens()"/>
        </div>

        <!-- menu de categorias (chips fixos com contagem) -->
        <div id="menu-categorias" class="menu"></div>

        <h2>Itens cadastrados</h2>

        <!-- GALERIA EM GRID -->
        <div id="itens-grid" class="grid-catalog"></div>
      </main>
    </div>

    <!-- ─── MODO LISTA PESSOAL ───────────────────────────────── -->
    <div id="modo-lista" style="display: none;">
      <aside class="form-section">
        <h1>Lista Pessoal</h1>
        <input type="text" id="nome-lista" placeholder="Nome da lista"/>
        <div id="itens-temp"></div>
        <button onclick="adicionarItemTemporario()">+ Adicionar Item</button>
        <button onclick="addLista()">Salvar Lista</button>
      </aside>

      <main class="catalog-section">
        <h2>Listas Salvas</h2>
        <ul id="listas-salvas"></ul>
      </main>
    </div>

  </div>
</body>
</html>
